<div class="container">
  <div >
  <h2>Dati Macchina</h2>
    
    <form [formGroup]="newMachine" (ngSubmit)="onSubmit()" >
      <div>
          <input class="input_text"
            placeholder="Nome"
            type="text" 
            formControlName="name"
            required
            />
      </div>

      <div >
        <input class="input_text"
          placeholder="Numero di serie"
          type="text"
          formControlName="serialNumber"
        />
      </div>

      <div >
        <input class="input_text"
          type="text"
          placeholder="Marca"
          formControlName="brand"
        />
      </div>

      <div >
        <input class="input_text"
          type="number"
          formControlName="year"
          placeholder="Anno di fabbricazione"
        />
      </div>


      <div class="select_field">
        <select formControlName="activationType" [(ngModel)]="initValueActivationType">
          <option value="empty" disabled selected>Attivazione</option>
          <option *ngFor="let activationType of activationTypes" [value]="activationType">{{ activationType }}</option>
        </select>
      </div>

      <div class="select_field">
        <select formControlName="containerType" [(ngModel)]="initValueContainerType">
          <option value="empty" disabled selected>Contenitore</option>
          <option *ngFor="let containerType of containerTypes" [value]="containerType">{{ containerType }}</option>
        </select>
      </div>

      <div>
        <input class="input_text"
          placeholder="Colore"
          type="text" 
          formControlName="color" 
          />
      </div>

      <div>
          <input class="input_text"
            type="text" 
            placeholder="Variazione"
            formControlName="variation" 
            />
      </div>
      
      <div>
        <textarea  class="input_text"
          placeholder="Descrizione"
          formControlName="description">
        </textarea>
      </div>


      <h2>Dati Proprietario</h2>
      <app-owner-form (ownerUpdate)="updateOwnerData($event)"></app-owner-form>

      <app-file-upload formControlName="images"></app-file-upload>
      
      <div>
        <mat-progress-bar *ngIf="progress > -1" mode="indeterminate"></mat-progress-bar>
      </div>

      <button
        *ngIf="progress == -1 && !inputMachine"
        type="submit"
        class="btn btn-success"
        [disabled]="!newMachine.valid"
      >
        <img class="checked-icon" src="/assets/checked-icon.svg" />
        Registra
      </button>
      <button
        *ngIf="progress == -1 && inputMachine"
        type="submit"
        class="btn btn-success"
        [disabled]="!newMachine.valid || !updatedMachine"
      >
        <img class="checked-icon" src="/assets/checked-icon.svg" />
        Aggiorna
      </button>
    </form>
  </div>
</div>
